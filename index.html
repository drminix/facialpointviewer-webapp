<!-- Facial point detection app written using Opencv.js & tensorflow.js -->

<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="description" content="Facial point detection app">
    <meta name="keywords" content="OpenCV.js, Tensorflow.js">
    <meta name="author" content="Sang Lee">
    
    <title>Real-time Facial PointDetection using VGG16</title>
    
   <!-- tensorflow.js -->
   <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"> </script>
   
   <!-- GUI) Materilize CSS related -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        
   <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        
   <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen"/>
         
    </head>
    <body>
        
    <!--   Header   -->
    <div class="section no-pad-bot" id="index-banner">
      <div class="container">
        <h5 class="header center blue-text small">Real-time Facial Keypoints Detection using Machine Learning(tensorflow.js)</h5>
        <div class="row center">
          <h6 class="header col s12 light">Model: VGG-16 transfer learning + data augmentation</h6>
            <h7 class="header col s12 light"><strong>*NOTE*</strong> Facial point detection will be enabled once the model is downloaded.</h7>
            
        </div>
      </div>
    </div>
        
      <!--   Start buttons   -->
    <div class="section no-pad-bot light-blue lighten-4">
    <div class="container">
    <div class="row center">
      <button disabled id="button_capture" class="waves-effect waves-light light-blue btn-small">Start Button</button>
      <br/><br/>
    </div>
    </div>
    </div>      

    <!-- canvas output -->    
    <div class="section no-pad-bot lighten-4">
    <div class="container">
    <div class="row center">
        <video id="video" width="400" height="400" style="display:none"></video>
        <canvas id="canvas_output" style="border:1px solid #000000;"> </canvas> 
        <canvas id="canvas_debug" width="96" height="96" style="border:1px solid #000000;" style="display:none"> </canvas> 
    </div>
    </div>
    </div>   

    
    <!-- github link -->
    <div class="section no-pad-bot light-blue lighten-4">
    <div class="container">
    <div class="row center">
        <p>
            - Github page for Desktop application written in Python & QT:
            <a href="https://github.com/drminix/facialpointviewer">https://github.com/drminix/facialpointviewer</a><br/>
        - Github page for Web application written in Javascript & Tensorflow.js <a href="https://github.com/drminix/facialpointviewer-webapp">https://github.com/drminix/facialpointviewer-webapp</a><br/>
        - IPython Notebook used for training VGG-16 network <a href="https://github.com/drminix/facialpointviewer/tree/master/notebook">https://github.com/drminix/facialpointviewer/tree/master/notebook</a><br/> <br/>
        </p>
  
    </div>
    </div>
    </div>    
        
    <!-- control panel -->
    <div class="container">
    <div class="section">
 
    <div class="row">
        
      <!--   Control   -->
      <div class="col s12 m6">
        <div class="icon-block">
          <h3 class="center light-blue-text"><i class="material-icons" style="font-size: 2em">build</i></h3>
          <h5 class="center">Control panel</h5>
 
          <p class="light"></p>
 
          <div>
            <p><label>Status:</label></p>
            <pre class="grey lighten-4" style="overflow-x: auto"><em id="model-status">Loading Model...</em></pre>
 
        
              
          </div>
          <br/>
 

 
        </div>
      </div>
 
      <!--   Fashion items   -->
      <div class="col s12 m6">
        <div class="icon-block">
          <h3 class="center light-blue-text"><i class="material-icons" style="font-size: 2em">face</i></h3>
          <h5 class="center">Fashion items</h5>
 <h6 class="center">*NOTE* Supported in desktop app</h6>
            <p>
            <label>
            <input type="checkbox" id="glasses_checkbox" disabled/>
            <span> Safety Glasses </span>
            </label>
            </p>

            <p>
            <label>
            <input type="checkbox" disabled />
            <span>N95 Mask </span>
            </label>
            </p>
            
            <p>
            <label>
            <input type="checkbox" disabled />
            <span>Cigarette </span>
            </label>
            </p>
            
        </div>
        </div>
    </div> <!-- the end of fashion item -->
    
  </div>
</div>
    
<script>
  var Module = {
    preRun: [function() {
      Module.FS_createPreloadedFile('/', 'haarcascade_frontalface_default.xml', 'https://raw.githubusercontent.com/drminix/models/master/facialpointdetection/haarcascade_frontalface_alt.xml', true, false);
      Module.FS_createPreloadedFile('/', 'model.json', 'https://raw.githubusercontent.com/drminix/models/master/facialpointdetection/tensorflowjs_model/model.json', true, false);
    }],
    _main: function() {meme();}
  };
</script>
    
    <script src="src/control.js"></script>
    <script async src="src/opencv.js" onload="onOpenCvReady();" type="text/javascript"></script>

</html>